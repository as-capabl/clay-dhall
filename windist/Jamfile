project : requirements <target-os>windows ;

install windist/include
    : [ glob ../include/clay-dhall/*.h ]
    : <install-source-root>../include
    ;

dllname = [ glob $(dist-dir)/build/clay-dhall/*.dll ] ;

install windist/lib
    : $(dllname) clay-dhall.def
    ;

make clay-dhall.def : $(dllname) : @gendef ;
actions gendef
{
    gendef - $(>) > $(<)
}

# Generate DEF
#import type ;
#type.register DEF : def ;

#import generators ;
#generators.register-standard def.dlltool-def : DEF : DLL ;

#actions dlltool-def {
#    dlltool --dllname $(<) --output-def $(>)
#}

